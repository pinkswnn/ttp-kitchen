const CONTACT={phone:"+14698857589",email:"info@ttpkitchen.com"};const LANE_HELP={"Private Chef":"For nights that deserve a memory.","Catering":"For gatherings that need to feel handled.","Pre-Orders":"For when you want it on your schedule."};const enc=v=>encodeURIComponent(v);const trim=v=>(v||"").trim();function addLine(lines,label,value){const v=trim(value);if(v)lines.push(`${label}: ${v}`);}function buildSmsBody(data){const lines=[];if(data.lane==="Pre-Orders"){lines.push("Hey Chef CP — put me on the plate drop list.");addLine(lines,"Name",data.name);addLine(lines,"Notes",data.updates);return lines.join("\n");}lines.push("Hey Chef CP — I’m ready to lock in.");lines.push("");addLine(lines,"Lane",data.lane);addLine(lines,"Date",data.date);addLine(lines,"Guests",data.guests);addLine(lines,"Area",data.area);addLine(lines,"Notes",data.notes);return lines.join("\n");}function smsHref(body){return `sms:${CONTACT.phone}?&body=${enc(body)}`;}function mailHref(data){const subject=enc("TTP Kitchen Inquiry");const lines=["Hey Chef CP,",""];addLine(lines,"Lane",data.lane);if(data.lane==="Pre-Orders"){addLine(lines,"Name",data.name);addLine(lines,"Notes",data.updates);}else{addLine(lines,"Date",data.date);addLine(lines,"Guests",data.guests);addLine(lines,"Area",data.area);addLine(lines,"Notes",data.notes);}lines.push("","Thanks!");return `mailto:${CONTACT.email}?subject=${subject}&body=${enc(lines.join("\n"))}`;}async function silentCopy(text){try{await navigator.clipboard.writeText(text);}catch{}}function haptic(ms=8){if("vibrate"in navigator)navigator.vibrate(ms);}const toast=document.getElementById("toast");const toastText=document.getElementById("toastText");let toastTimer=null;function showToast(msg="READY"){if(!toast||!toastText)return;toastText.textContent=msg;toast.classList.add("is-showing");clearTimeout(toastTimer);toastTimer=setTimeout(()=>toast.classList.remove("is-showing"),650);}const reduceMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(!reduceMotion){const revealEls=document.querySelectorAll(".reveal");const io=new IntersectionObserver((entries)=>{entries.forEach((e)=>{if(e.isIntersecting){e.target.classList.add("is-visible");io.unobserve(e.target);}});},{threshold:.14});revealEls.forEach(el=>io.observe(el));}else{document.querySelectorAll(".reveal").forEach(el=>el.classList.add("is-visible"));}const yearEl=document.getElementById("year");if(yearEl)yearEl.textContent=new Date().getFullYear();const chips=Array.from(document.querySelectorAll(".chip[data-lane]"));const laneSelect=document.getElementById("lane");const laneHelp=document.getElementById("laneHelp");const nameWrap=document.getElementById("fieldNameWrap");const dateWrap=document.getElementById("fieldDateWrap");const guestsWrap=document.getElementById("fieldGuestsWrap");const areaWrap=document.getElementById("fieldAreaWrap");const notesWrap=document.getElementById("fieldNotesWrap");const updatesWrap=document.getElementById("fieldUpdatesWrap");const elName=document.getElementById("name");const elDate=document.getElementById("date");const elGuests=document.getElementById("guests");const elArea=document.getElementById("area");const elNotes=document.getElementById("notes");const elUpdates=document.getElementById("updates");const heroSms=document.getElementById("heroSms");const heroEmail=document.getElementById("heroEmail");const startSms=document.getElementById("startSms");const startEmail=document.getElementById("startEmail");const barSms=document.getElementById("barSms");function getData(){return{lane:laneSelect?.value||"Private Chef",name:elName?.value||"",date:elDate?.value||"",guests:elGuests?.value||"",area:elArea?.value||"",notes:elNotes?.value||"",updates:elUpdates?.value||""};}function applyLaneUI(lane){if(laneHelp)laneHelp.textContent=LANE_HELP[lane]||"";const isPre=lane==="Pre-Orders";if(nameWrap)nameWrap.hidden=!isPre;if(updatesWrap)updatesWrap.hidden=!isPre;if(dateWrap)dateWrap.hidden=isPre;if(guestsWrap)guestsWrap.hidden=isPre;if(areaWrap)areaWrap.hidden=isPre;if(notesWrap)notesWrap.hidden=isPre;if(isPre){if(elDate)elDate.value="";if(elGuests)elGuests.value="";if(elArea)elArea.value="";if(elNotes)elNotes.value="";}else{if(elName)elName.value="";if(elUpdates)elUpdates.value="";}}async function refreshLinks(andToast=false){const data=getData();const body=buildSmsBody(data);const sms=smsHref(body);const mail=mailHref(data);if(heroSms)heroSms.href=sms;if(startSms)startSms.href=sms;if(barSms)barSms.href=sms;if(heroEmail)heroEmail.href=mail;if(startEmail)startEmail.href=mail;if(!reduceMotion){await silentCopy(body);if(andToast){showToast("READY");haptic(8);}}}function setActiveChip(lane){chips.forEach(btn=>{const active=btn.dataset.lane===lane;btn.classList.toggle("is-active",active);btn.setAttribute("aria-pressed",active?"true":"false");});}chips.forEach(btn=>{btn.addEventListener("click",async()=>{const lane=btn.dataset.lane||"Private Chef";if(laneSelect)laneSelect.value=lane;setActiveChip(lane);applyLaneUI(lane);await refreshLinks(true);});});laneSelect?.addEventListener("change",async()=>{const lane=laneSelect.value;setActiveChip(lane);applyLaneUI(lane);await refreshLinks(true);});[elName,elDate,elGuests,elArea,elNotes,elUpdates].filter(Boolean).forEach(el=>{el.addEventListener("input",()=>refreshLinks(false));el.addEventListener("blur",()=>refreshLinks(true));});const heroImg=document.getElementById("heroImg");function parallax(){if(!heroImg||reduceMotion)return;const rect=heroImg.getBoundingClientRect();const vh=window.innerHeight||800;if(!(rect.bottom>0&&rect.top<vh))return;const progress=rect.top/vh;const translate=Math.max(-10,Math.min(10,progress*-10));heroImg.style.transform=`scale(1.05) translateY(${translate}px)`;}window.addEventListener("scroll",()=>requestAnimationFrame(parallax),{passive:true});window.addEventListener("resize",()=>requestAnimationFrame(parallax));parallax();applyLaneUI("Private Chef");refreshLinks(false);
